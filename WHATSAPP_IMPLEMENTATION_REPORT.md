# تقرير تطبيق نظام الواتساب متعدد المنصات

## نظرة عامة
تم تطبيق نظام شامل لإرسال رسائل واتساب مخصصة لكل منصة تواصل اجتماعي مع أرقام هواتف مختلفة.

## الرسائل وأرقام الهواتف حسب المنصة

| المنصة | رقم الهاتف | الرسالة |
|--------|------------|---------|
| ميتا/فيسبوك | 0539488805 | مرحبا، السلام عليكم ورحمة الله، أرغب بالإستفسار عن المشروع |
| سناب شات | 0555812257 | مرحبا، أرغب بالإستفسار عن المشروع |
| جوجل إعلانات | 0543766262 | مرحبا السلام عليكم ورحمة الله، أرغب بالإستفسار عن المشروع |
| واتساب | 0552845403 | مرحبا السلام عليكم ورحمة الله وبركاته، أرغب بالإستفسار عن المشروع |
| افتراضي (موقع مباشر) | 0536667967 | مرحبا السلام عليكم ورحمة الله وبركاته ✨\nأرغب بالإستفسار عن مشروع ٢٤ - حي الزهراء في جدة |

## الملفات التي تم تحديثها

### 1. `lib/whatsapp-messages.ts`
- تم تحديث قاعدة بيانات الرسائل والأرقام
- إضافة دعم لـ "Meta" كبديل لـ Facebook
- إضافة دعم لـ Google Ads بعدة صيغ

### 2. `hooks/use-source-tracking.ts`
- تحسين تتبع المصادر
- تطبيع أسماء المنصات
- إضافة دعم أفضل لـ UTM parameters

### 3. `lib/tracking.ts`
- إضافة منصات جديدة (Meta، Google، WhatsApp)
- تحديث نظام التمديدات والروابط

### 4. `components/clean-hero.tsx`
- تحديث لاستخدام النظام الجديد بدلاً من الرقم المشفر

### 5. `components/apartment-showcase.tsx`
- تحديث لاستخدام النظام الجديد

## كيف يعمل النظام

1. **تتبع المصدر**: النظام يتتبع من أين أتى الزائر (فيسبوك، جوجل، إلخ)
2. **اختيار الرسالة**: يختار الرسالة ورقم الهاتف المناسب حسب المصدر
3. **إنشاء الرابط**: ينشئ رابط واتساب مع الرسالة المشفرة
4. **فتح الواتساب**: يفتح الواتساب مع الرسالة الجاهزة

## طرق تتبع المصادر

### 1. UTM Parameters
```
example.com?utm_source=facebook&utm_medium=social
example.com?utm_source=google&utm_medium=ads
```

### 2. Referrer Detection
النظام يكتشف تلقائياً إذا أتى الزائر من:
- facebook.com أو fb.com أو meta.com
- instagram.com
- google.com أو google.ae
- snapchat.com
- وغيرها...

### 3. الروابط المخصصة
```
yourwebsite.com/fb (للفيسبوك)
yourwebsite.com/ig (للإنستغرام)
yourwebsite.com/sc (لسناب شات)
```

## اختبار النظام

تم إنشاء ملف `test-whatsapp-system.html` لاختبار جميع المنصات يدوياً.

## ملاحظات مهمة

1. **تطابق المنصات**: النظام يدعم أسماء مختلفة لنفس المنصة (مثل "meta" و "facebook")
2. **الحالة الافتراضية**: إذا لم يتم تحديد المنصة، يستخدم الرقم والرسالة الافتراضية
3. **التشفير**: جميع الرسائل يتم تشفيرها تلقائياً للعمل مع واتساب

## التطوير المستقبلي

يمكن إضافة:
- منصات جديدة بسهولة
- تتبع أكثر تفصيلاً
- رسائل مخصصة أكثر حسب الحملة الإعلانية
- تحليلات لاستخدام كل منصة

## كيفية إضافة منصة جديدة

1. أضف المنصة في `lib/whatsapp-messages.ts`
2. أضف دعمها في `hooks/use-source-tracking.ts`
3. اختبر النظام

مثال:
```typescript
'tiktok': {
  phone: '0512345678',
  message: 'مرحبا من تيك توك! أرغب بالإستفسار عن المشروع'
}
```
